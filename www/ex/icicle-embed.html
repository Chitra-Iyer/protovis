<html>
  <head>
    <title>Flare Icicle</title>
    <script type="text/javascript" src="../protovis-r3.2.js"></script>
    <script type="text/javascript" src="flare.js"></script>
    <link rel="stylesheet" type="text/css" href="ex.css"/>
  </head>
  <body>
    <script type="text/javascript+protovis">

      /* The root panel. */
      var vis = new pv.Panel()
          .width(857)
          .height(277)
          .top(1.5)
          .bottom(20.5)
          .left(1.5)
          .right(1.5);

      var layout = vis.add(pv.Layout.Partition.Fill)
        .nodes(pv.dom(flare)
          .root("flare")
          .sort(function(a, b) pv.naturalOrder(a.nodeName, b.nodeName))
          .nodes())
        .orient("top")
        .size(function(d) d.nodeValue);

      layout.node.add(pv.Bar)
        .fillStyle(function(n) n.firstChild ? "#aec7e8" : "#ff7f0e")
        .title(function t(d) d.parentNode ? (t(d.parentNode) + "." + d.nodeName) : d.nodeName)
        .cursor("pointer");

      layout.label.add(pv.Label)
        .textAngle(-Math.PI / 2)
        .visible(function(n) n.dx > 10)
        .text(function(n) n.nodeName);

      vis.render();

    </script>
  </body>
</html>
